{"ast":null,"code":"import \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/modal/style\";\nimport _Modal from \"antd/es/modal\";\nimport \"antd/es/table/style\";\nimport _Table from \"antd/es/table\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nimport \"antd/es/message/style\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"/Users/stevenl/Desktop/Projects/Content-Management-System/client/src/containers/category/category.js\";\nimport React, { Component } from 'react';\nimport LinkButton from '../../components/link-button';\nimport { reqCategories } from '../../api';\nimport AddForm from './add-form';\nimport UpdateForm from './update-form';\nexport default class Category extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      categories: [],\n      // first level category\n      subCategories: [],\n      loading: false,\n      // used to determine whether it is in the process of getting data\n      parentId: 'a',\n      // the parent Id of the first level category\n      parentName: '',\n      // the name of the first level category\n      showModalStatus: 0 // the status of modal, 0: both are hidden, 1: show add modal, 2: show update modal\n\n    };\n\n    this.initColumns = () => {\n      this.columns = [{\n        title: 'Category',\n        dataIndex: 'name'\n      }, {\n        title: 'Action',\n        width: 300,\n        render: category => // return the tags for actions\n        React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31\n          },\n          __self: this\n        }, React.createElement(LinkButton, {\n          onClick: this.showUpdateModal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32\n          },\n          __self: this\n        }, \"Edit\"), this.state.parentId === 'a' ? React.createElement(LinkButton, {\n          onClick: () => this.showSubCategories(category),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33\n          },\n          __self: this\n        }, \"Check sub-categories\") : null)\n      }];\n    };\n\n    this.getCategories = async () => {\n      // show loading before send the request\n      this.setState({\n        loading: true\n      });\n      const parentId = this.state.parentId;\n      const categories = await reqCategories(parentId);\n      this.setState({\n        loading: false\n      });\n\n      if (categories) {\n        if (parentId === 'a') {\n          this.setState({\n            categories\n          });\n        } else {\n          this.setState({\n            subCategories: categories\n          });\n        }\n      } else {\n        _message.error('failed to get category!');\n      }\n    };\n\n    this.showSubCategories = category => {\n      // update the state \n      // * setState() is an asynchrnous update now, so we have to put getCategories() in callback so that we can get the new parentId!\n      this.setState({\n        parentId: category._id,\n        parentName: category.name\n      }, () => {\n        // get the sub categories\n        this.getCategories();\n      });\n    };\n\n    this.showCategories = () => {\n      // set the states for showing the parent categories\n      this.setState({\n        parentId: 'a',\n        parentName: '',\n        subCategories: []\n      });\n    };\n\n    this.showAddModal = () => {\n      this.setState({\n        showModalStatus: 1\n      });\n    };\n\n    this.showUpdateModal = () => {\n      this.setState({\n        showModalStatus: 2\n      });\n    };\n\n    this.addCategory = () => {\n      console.log('addCategory');\n    };\n\n    this.updateCategory = () => {\n      console.log('updateCategory');\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        showModalStatus: 0\n      });\n    };\n  }\n\n  // used to load data before the first render\n  componentWillMount() {\n    this.initColumns();\n  } // for ajax request \n\n\n  componentDidMount() {\n    this.getCategories();\n  }\n\n  render() {\n    const _this$state = this.state,\n          categories = _this$state.categories,\n          subCategories = _this$state.subCategories,\n          parentId = _this$state.parentId,\n          parentName = _this$state.parentName,\n          loading = _this$state.loading,\n          showModalStatus = _this$state.showModalStatus; // setup the left side of card\n\n    const title = parentId === 'a' ? \"Product's categories\" : React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(LinkButton, {\n      onClick: this.showCategories,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Product's categories\"), React.createElement(_Icon, {\n      type: \"arrow-right\",\n      style: {\n        marginRight: 5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, parentName)); // setup the right side of card\n\n    const extra = React.createElement(_Button, {\n      type: \"primary\",\n      onClick: this.showAddModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(_Icon, {\n      type: \"plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), \"Add\");\n    return React.createElement(_Card, {\n      title: title,\n      extra: extra,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(_Table, {\n      bordered: true,\n      rowKey: \"_id\",\n      loading: loading,\n      dataSource: parentId === 'a' ? categories : subCategories,\n      columns: this.columns,\n      pagination: {\n        defaultPageSize: 6,\n        showQuickJumper: true\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(_Modal, {\n      title: \"Add a Category\",\n      visible: showModalStatus === 1,\n      onOk: this.addCategory,\n      onCancel: this.handleCancel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(AddForm, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    })), React.createElement(_Modal, {\n      title: \"Update a category\",\n      visible: showModalStatus === 2,\n      onOk: this.updateCategory,\n      onCancel: this.handleCancel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(UpdateForm, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/Users/stevenl/Desktop/Projects/Content-Management-System/client/src/containers/category/category.js"],"names":["React","Component","LinkButton","reqCategories","AddForm","UpdateForm","Category","state","categories","subCategories","loading","parentId","parentName","showModalStatus","initColumns","columns","title","dataIndex","width","render","category","showUpdateModal","showSubCategories","getCategories","setState","error","_id","name","showCategories","showAddModal","addCategory","console","log","updateCategory","handleCancel","componentWillMount","componentDidMount","marginRight","extra","defaultPageSize","showQuickJumper"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Card, Table, Button, Icon, message, Modal } from 'antd';\n\nimport LinkButton from '../../components/link-button';\nimport { reqCategories } from '../../api';\nimport AddForm from './add-form';\nimport UpdateForm from './update-form';\n\nexport default class Category extends Component {\n\n    state = {\n        categories: [], // first level category\n        subCategories: [],\n        loading: false, // used to determine whether it is in the process of getting data\n        parentId: 'a', // the parent Id of the first level category\n        parentName: '', // the name of the first level category\n        showModalStatus: 0, // the status of modal, 0: both are hidden, 1: show add modal, 2: show update modal\n    }\n\n    // initiate the column of table \n    initColumns = () => {\n        this.columns = [\n            {\n                title: 'Category',\n                dataIndex: 'name',\n            },\n            {\n                title: 'Action',\n                width: 300,\n                render: (category) => ( // return the tags for actions\n                    <span>\n                        <LinkButton onClick={this.showUpdateModal}>Edit</LinkButton>\n                        {this.state.parentId === 'a' ? <LinkButton onClick={() => this.showSubCategories(category)}>Check sub-categories</LinkButton> : null}\n                    </span>\n                )\n            },\n        ]\n    }\n\n    // get a list of categories by ajax \n    getCategories = async () => {\n        // show loading before send the request\n        this.setState({ loading: true });\n        const { parentId } = this.state;\n\n        const categories = await reqCategories(parentId);\n\n        this.setState({ loading: false });\n\n        if (categories) {\n            if (parentId === 'a') {\n                this.setState({\n                    categories\n                });\n            } else {\n                this.setState({\n                    subCategories: categories\n                });\n            }\n\n        } else {\n            message.error('failed to get category!');\n        }\n\n    }\n\n    // show the sub categories based on the parent category\n    showSubCategories = (category) => {\n        // update the state \n        // * setState() is an asynchrnous update now, so we have to put getCategories() in callback so that we can get the new parentId!\n        this.setState({\n            parentId: category._id,\n            parentName: category.name\n        }, () => {\n            // get the sub categories\n            this.getCategories();\n        });\n    }\n\n    // show the parent categories\n    showCategories = () => {\n        // set the states for showing the parent categories\n        this.setState({\n            parentId: 'a',\n            parentName: '',\n            subCategories: []\n        });\n    }\n\n    // show the add modal\n    showAddModal = () => {\n        this.setState({\n            showModalStatus: 1\n        });\n    }\n\n    // show the update modal\n    showUpdateModal = () => {\n        this.setState({\n            showModalStatus: 2\n        });\n    }\n\n    // add a category\n    addCategory = () => {\n        console.log('addCategory');\n    }\n\n    // update a category\n    updateCategory = () => {\n        console.log('updateCategory');\n    }\n\n\n    // hide the modal\n    handleCancel = () => {\n        this.setState({\n            showModalStatus: 0\n        });\n    }\n\n    // used to load data before the first render\n    componentWillMount() {\n        this.initColumns();\n    }\n\n    // for ajax request \n    componentDidMount() {\n        this.getCategories();\n    }\n\n    render() {\n\n        const { categories, subCategories, parentId, parentName, loading, showModalStatus } = this.state;\n\n        // setup the left side of card\n        const title = parentId === 'a' ? \"Product's categories\" : (\n            <span>\n                <LinkButton onClick={this.showCategories}>Product's categories</LinkButton>\n                <Icon type='arrow-right' style={{ marginRight: 5 }} />\n                <span>{parentName}</span>\n            </span>\n        );\n\n        // setup the right side of card\n        const extra = (\n            <Button type=\"primary\" onClick={this.showAddModal}>\n                <Icon type=\"plus\" />\n                Add\n            </Button>\n        );\n\n        return (\n            <Card title={title} extra={extra} >\n                <Table\n                    bordered\n                    rowKey='_id'\n                    loading={loading}\n                    dataSource={parentId === 'a' ? categories : subCategories}\n                    columns={this.columns}\n                    pagination={{ defaultPageSize: 6, showQuickJumper: true }}\n                />\n\n                <Modal\n                    title=\"Add a Category\"\n                    visible={showModalStatus === 1}\n                    onOk={this.addCategory}\n                    onCancel={this.handleCancel}\n                >\n                    <AddForm />\n                </Modal>\n\n                <Modal\n                    title=\"Update a category\"\n                    visible={showModalStatus === 2}\n                    onOk={this.updateCategory}\n                    onCancel={this.handleCancel}\n                >\n                    <UpdateForm />\n                </Modal>\n            </Card>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}